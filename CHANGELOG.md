# Changelog

## v1.1.0 (2025-10-20)

### 新機能
- **キーボードショートカット**: `1`、`2`、`3`キーで録画映像の再生が可能に
- **リアルタイムプレビュー**: 設定画面で変更した内容が即座にカメラ映像に反映
- **画面リサイズ対応**: ウィンドウサイズの変更に追随してカメラ映像が自動調整

### 改善
- **設定画面のレイアウト**: 
  - 設定画面を開いたときにカメラ映像が左上60%のサイズで表示
  - 設定画面の下部と右側に操作エリアを配置
  - 半透明の背景でカメラ映像を確認しながら設定可能
- **カメラ切り替え**:
  - 設定画面でカメラを切り替えると、そのカメラの設定が自動的に読み込まれる
  - 矢印キーでカメラ切り替え時も設定が保持される
- **表示領域機能**:
  - クロップ処理から背景色オーバーレイ方式に変更
  - 指定領域外を背景色で塗りつぶし（4つの長方形を前面配置）
  - `object-fit: cover`で常に16:9のアスペクト比を保持
- **カメラ映像表示**:
  - 1920x1080を基準とした座標系で表示領域を管理
  - カメラ解像度が異なる場合でも正しく動作
  - 画面アスペクト比が16:9でない場合も対応（短い方に合わせて中央配置）

### バグ修正
- 設定画面の開閉時にカメラ映像サイズが正しく変更されない問題を修正
- z-indexの調整により設定画面の操作性を改善
- CSSトランジション完了後に描画を行うようタイミングを調整（350ms）
- 設定画面でのクロップオーバーレイサイズが逆になる問題を修正

### 技術的な変更
- `element.style`でのピクセル指定から`width: 100%; height: 100%`に変更
- オーバーレイDOM要素の動的生成・削除処理を追加
- `requestAnimationFrame`によるメタデータ読み込み待機処理
- CSSの`overflow: hidden`でオーバーレイのはみ出しを防止

## v1.0.0 (2025-10-20)

### 初回リリース
- カメラアクセスとストリーミング表示
- 複数カメラの選択と切り替え（←→キー）
- カメラごとの設定保存
  - 変形・回転（flip/rotate）
  - フィルター9種類
  - 表示領域（クロップ）
  - 背景色
- 録画機能
  - 最大60秒の録画
  - IndexedDBに最大3本保存
  - ループ再生
- MQTT機能
  - カメラ切り替え制御
  - 録画再生制御
  - Will メッセージ（online/away）
- 設定のエクスポート/インポート（JSON形式）
- キーボードショートカット
  - S: 設定画面開閉
  - ESC: 設定画面を閉じる/再生停止
  - F: フルスクリーン切り替え
  - R: 録画開始/停止
  - ←→: カメラ切り替え
